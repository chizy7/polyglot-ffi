.TH POLYGLOT-FFI-CLEAN 1 "2025-10-30" "v0.5.0" "Polyglot FFI Manual"
.SH NAME
polyglot-ffi-clean \- Remove generated FFI binding files
.SH SYNOPSIS
.B polyglot-ffi clean
[\fIoptions\fR] [\fIpath\fR]
.SH DESCRIPTION
Removes files generated by polyglot-ffi, including:
.IP \(bu 2
OCaml ctypes descriptions
.IP \(bu 2
C stub files
.IP \(bu 2
Target language wrappers
.IP \(bu 2
Build system configurations
.IP \(bu 2
Build artifacts and caches
.PP
Useful for:
.IP \(bu 2
Cleaning up before regenerating bindings
.IP \(bu 2
Removing stale generated files
.IP \(bu 2
Preparing for version control commits
.IP \(bu 2
Troubleshooting build issues
.SH OPTIONS
.TP
.B path
Directory to clean. Default: current directory
.TP
.B \-n, \-\-dry-run
Show what would be deleted without actually deleting files
.TP
.B \-f, \-\-force
Delete files without confirmation
.TP
.B \-c, \-\-config PATH
Path to configuration file. Default: ./polyglot.toml
.TP
.B \-\-all
Clean all generated files, including build artifacts
.TP
.B \-\-pattern PATTERN
Clean only files matching pattern (e.g., "*.ml", "stubs.*")
.TP
.B \-v, \-\-verbose
Enable verbose output showing each file being cleaned
.TP
.B \-h, \-\-help
Show help message and exit
.SH FILE PATTERNS
The clean command removes files matching these patterns:
.TP
.B type_description.ml
OCaml ctypes type descriptions
.TP
.B function_description.ml
OCaml ctypes function bindings
.TP
.B stubs.c, stubs.h
C wrapper files
.TP
.B *_py.py
Python wrapper modules
.TP
.B dune, dune-project
Build system configurations
.TP
.B _build/
OCaml build directory (with --all)
.TP
.B *.pyc, __pycache__/
Python bytecode (with --all)
.SH EXAMPLES
.TP
Clean with dry run (safe preview):
.EX
$ polyglot-ffi clean --dry-run
.EE
.TP
Clean current directory:
.EX
$ polyglot-ffi clean
.EE
.TP
Clean specific directory:
.EX
$ polyglot-ffi clean generated/
.EE
.TP
Clean without confirmation:
.EX
$ polyglot-ffi clean --force
.EE
.TP
Clean all files including build artifacts:
.EX
$ polyglot-ffi clean --all
.EE
.TP
Clean only C stub files:
.EX
$ polyglot-ffi clean --pattern "stubs.*"
.EE
.SH SAFETY
.TP
.B Confirmation
Without --force, the command asks for confirmation before deleting files
.TP
.B Dry Run
Use --dry-run to preview what would be deleted without making changes
.TP
.B Selective Deletion
Use --pattern to delete only specific types of generated files
.TP
.B Excluded Files
Source files (.mli, .ml) and configuration files are never deleted
.SH OUTPUT
The clean command displays:
.IP \(bu 2
List of files to be deleted
.IP \(bu 2
File size for each deleted file
.IP \(bu 2
Total number of files deleted
.IP \(bu 2
Total disk space freed
.SH EXIT STATUS
.TP
.B 0
Success - files cleaned
.TP
.B 1
Error - failed to delete files (permission denied, etc.)
.TP
.B 2
Configuration error
.SH SEE ALSO
.BR polyglot-ffi (1),
.BR polyglot-ffi-generate (1)
.SH NOTES
Always use --dry-run first to preview what will be deleted, especially when
using --all or custom patterns.
.PP
This command only affects generated files. Your source .mli and .ml files are
never deleted.
